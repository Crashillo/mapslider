!function(e,t,a,r,n){"use strict";function o(e,a){t.getElementById(e).innerHTML=a.toLocaleString()}function i(e,t){return e>t?"#800026":e>t-5e4?"#bf7f92":"transparent"}function s(e){var t=n.find(c,function(t){return t.Nombre=t.Nombre.replace(". Total. Total habitantes. Personas. ",""),t.Nombre.indexOf(e)>-1})||{};return t.Data[0].Valor}function u(e){switch(e){case"Illes Balears":return"Balears, Illes";case"Alacant/Alicante":return"Alicante/Alacant";case"La Rioja":return"Rioja, La";case"Guipúzcoa":return"Gipuzkoa";case"Vizcaya":return"Bizkaia";case"A Coruña":return"Coruña, A";case"Las Palmas":return"Palmas, Las";default:return e}}function l(e){e||(e=JSON.parse(sessionStorage.getItem("geo"))),f&&p.removeLayer(f),f=a.geoJSON(e.features,{style:function(e){var t=i(s(u(e.properties.ROTULO)),r("#slider").slider("value"));return{fillColor:t,color:"#800026",weight:1,opacity:.7,fillOpacity:.6,dashArray:"5,5"}}}).bindPopup(function(e){return e.feature.properties.ROTULO+": "+s(u(e.feature.properties.ROTULO)).toLocaleString()}).addTo(p)}a.Icon.Default.imagePath="images/";var c,f,p=a.map("map",{center:[37.143,-4.79],zoom:5});new a.tileLayer("http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png",{minZoom:0,maxZoom:18,attribution:'Map data © <a href="http://www.openstreetmap.org">OpenStreetMap contributors</a>'}).addTo(p),r("#slider").slider({create:function(){o("explanation",r("#slider").slider("value"))},slide:function(e,t){o("explanation",t.value),l()},animate:"slow",max:3e6,min:5e4,value:5e5}),r.get("http://servicios.ine.es/wstempus/js/ES/DATOS_TABLA/2852?nult=1",function(e){c=n.filter(e,function(e){return e.Nombre.indexOf("Total.")>-1}),r.getJSON("data/SE89_10_ADMIN_PROV_A_X.json",function(e){l(e),sessionStorage.setItem("geo",JSON.stringify(e))})})}(window,document,L,$,_);